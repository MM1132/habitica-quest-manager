<div class="section">
  <h2>Current Quest Info</h2>
  
  <div class="section-content">
    <? if (props.currentQuest) { ?>
      <ul>
        <li><strong>Quest name:</strong>
          <?= props.currentQuest.text ?>
        </li>
        <li>
          <strong>Drops:</strong>
          <ul>
            <li><strong>Gold:</strong>
              <?= props.currentQuest.drop.gp ?>
            </li>
            <li><strong>Exp:</strong>
              <?= props.currentQuest.drop.exp ?>
            </li>
            <li>
              <strong>Items:</strong>
              <ul>
                <? for(let i = 0; i < props.currentQuest.drop.items.length; i++) { ?>
                <li>
                  <?= props.currentQuest.drop.items[i].text ?>
                </li>
                <? } ?>
              </ul>
            </li>
          </ul>
        </li>
        <li><strong>Quest leader:</strong>
          <?= props.currentQuest.leaderProfileName ?>
        </li>
        <li><strong>Status:</strong>
          <?= props.currentQuest.status ?>
        </li>
        <li><strong>Participating members:</strong>
          <?= props.currentQuest.memberCount ?> /
          <?= props.party.memberCount ?>
        </li>
        <li><strong>Participation percentage:</strong>
          <?= props.currentQuest.participation ?>%
        </li>
      </ul>
      <div>
        <? if ("start" in props.currentQuest.links) { ?>
          <button
            class="button"
            id="current-quest-start-button"
            onclick="forceStartQuest('<?= props.party.id ?>', 'current-quest-start-button')"
          >
            Start this quest
          </button>
        <? } else { ?>
          <i>no actions available</i>
        <? } ?>
      </div>
    <? } else { ?>
      <i>No active quest</i>
    <? } ?>
  </div>
</div>
