<? const globalData = getGlobalPageData(); ?>

<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <?!= include('src/pages/main/styles'); ?>
  </head>
  <body>
    <script>
      const changeSettings = () => {
        const userId = document.getElementById('userId').value;
        const apiToken = document.getElementById('apiToken').value;

        google.script.run.withSuccessHandler(() => {
          alert('Settings updated successfully!');
        }).withFailureHandler((error) => {
          alert('Error: ' + error);
        }).setSettingsPageData(userId, apiToken);

      }
    </script>

    <div class="header">
      <h4><?= globalData.scriptName ?></h4>
      <nav>
        <ul class="navigation-buttons">
          <li><a class="button" href="<?= globalData.mainPageUrl ?>">Main</a></li>
          <li><a class="button" href="<?= globalData.settingsPageUrl ?>">Settings</a></li>
        </ul>
      </nav>
    </div>
    
    <main>
      <center>
        <div class="section">
          <h2>Set your User ID and API Token</h2>
          <div class="section-content">
            <div id="settings-form">
              <input class="text-field" type="text" id="userId" name="userId" placeholder="Enter User ID" required>
              <input class="text-field" type="password" id="apiToken" name="apiToken" placeholder="Enter API Token" required>

              <button class="button" id="settings-form-submit-button" onclick="changeSettings()">Apply Settings</button>
            </form>
          </div>
        </div>
      </center>
    </main>
  </body>
</html>
